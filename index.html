<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì—ë‹ˆì–´ê·¸ë¨ ì •ë°€ ì§„ë‹¨ í…ŒìŠ¤íŠ¸ (ì „ë¬¸ê°€ìš© ê¸°ì¤€)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #db2777;
            --primary-light: #fdf2f8;
            --bg-color: #f9fafb;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: #1f2937;
            line-height: 1.6;
            -webkit-tap-highlight-color: transparent;
        }

        .gaegu { font-family: 'Gaegu', cursive; }

        #test-container {
            background-color: #ffffff;
            border-radius: 24px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.04);
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background-color: #f3f4f6;
            border-radius: 4px;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        #progress-bar {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-item {
            background-color: #ffffff;
            border: 1px solid #f3f4f6;
            padding: 1.25rem;
            border-radius: 18px;
            margin-bottom: 1rem;
        }
        .question-text {
            font-size: 1rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.75rem;
        }

        .rating-guide {
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            color: #9ca3af;
            margin-bottom: 0.4rem;
        }

        .rating-grid {
            display: flex;
            justify-content: space-between;
            gap: 6px;
        }
        .rating-grid label {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 0;
            background-color: #f9fafb;
            border: 1px solid #f3f4f6;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            color: #6b7280;
        }
        .rating-grid input:checked + label {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
        }
        .rating-grid input { display: none; }

        .nav-buttons {
            display: flex;
            gap: 12px;
            margin-top: 1.5rem;
        }
        .btn {
            flex: 1;
            padding: 1rem;
            border-radius: 16px;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            border: none;
        }
        .btn-prev { background-color: #f3f4f6; color: #6b7280; }
        .btn-next { background-color: var(--primary); color: white; }

        #options-area {
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 8px;
        }

        .result-card {
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid #f3f4f6;
            background: white;
        }

        .score-bar-container {
            width: 100%;
            height: 6px;
            background-color: #f3f4f6;
            border-radius: 3px;
            margin-top: 4px;
        }
        .score-bar-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 3px;
        }

        @media (max-width: 640px) {
            #test-container { padding: 1.25rem; border-radius: 0; min-height: 100vh; }
            #options-area { max-height: none; }
        }
    </style>
</head>
<body class="py-0 sm:py-6 flex justify-center">
    <div id="test-container" class="w-full max-w-2xl p-6 sm:p-10">
        <header class="text-center mb-6">
            <h1 class="gaegu text-4xl text-pink-600 mb-1">ì—ë‹ˆì–´ê·¸ë¨ ì •ë°€ ì§„ë‹¨</h1>
            <p class="text-gray-400 text-[0.7rem] uppercase tracking-tighter">Professional Enneagram Analysis</p>
        </header>

        <div id="quiz-ui">
            <div class="progress-container">
                <div id="progress-bar"></div>
            </div>
            <div id="step-info" class="flex justify-between items-end mb-4">
                <h2 id="step-title" class="gaegu text-xl text-gray-800">ì§ˆë¬¸ì— ë‹µí•´ ë³´ì„¸ìš”</h2>
                <span id="page-indicator" class="text-xs font-bold text-pink-500"></span>
            </div>
            
            <div id="options-area"></div>

            <div class="nav-buttons">
                <button id="prev-btn" class="btn btn-prev gaegu hidden">ì´ì „</button>
                <button id="next-btn" class="btn btn-next gaegu">ë‹¤ìŒ ë‹¨ê³„</button>
            </div>
            <div id="error-message" class="text-red-400 text-[0.7rem] mt-3 text-center hidden">ëª¨ë“  ë¬¸í•­ì— ë‹µë³€ì„ ì²´í¬í•´ ì£¼ì„¸ìš”.</div>
        </div>

        <div id="result-area" class="hidden">
            <h2 class="gaegu text-3xl text-center text-gray-800 mb-6">ì •ë°€ ë¶„ì„ ê²°ê³¼ ë¦¬í¬íŠ¸</h2>
            <div id="result-content"></div>
            
            <div class="mt-6 p-5 bg-gray-50 rounded-3xl border border-gray-100">
                <h4 class="gaegu text-lg text-gray-600 mb-3">ğŸ“Š ìœ í˜•ë³„ ì ìˆ˜ ë¶„í¬ (100ì  ë§Œì )</h4>
                <div id="score-stats" class="space-y-2"></div>
            </div>

            <button onclick="location.reload()" class="btn btn-next mt-6 gaegu">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
        </div>

        <footer class="mt-10 text-center text-gray-300 text-[0.6rem] gaegu">
            Reference: ë‹¤ì›€êµìœ¡ë¼ì´í”„ì½”ì¹­í˜‘íšŒ ì „ë¬¸ê°€ ì§„ë‹¨ì§€ ê¸°ë°˜ <br>
            Designed by @peace_shiny
        </footer>
    </div>

    <script>
        // PDF 180ë¬¸í•­ ë° í•˜ìœ„ìœ í˜• ë³´ì™„ ë°ì´í„°
        const enneagramQuestions = [
            { t: 1, q: "ì–¸í–‰ì¼ì¹˜ë¥¼ ì¶”êµ¬í•˜ë©° ë§í•œ ê²ƒì€ ê¼­ ì§€í‚¨ë‹¤." },
            { t: 1, q: "ì‚¬ëŒë“¤ì€ ë‚˜ë¥¼ ì§„ì§€í•˜ê³  ìœµí†µì„± ì—†ëŠ” ì‚¬ëŒì´ë¼ ìƒê°í•œë‹¤." },
            { t: 1, q: "ë¶ˆì™„ì „í•¨ì„ ìµœì„ ì„ ë‹¤í•´ ê°œì„ í•˜ê³  ì‹¶ì€ ìš•êµ¬ê°€ ê°•í•˜ë‹¤." },
            { t: 1, q: "ë‚´ ë¨¸ë¦¿ì†ì—ëŠ” ëŠ˜ ë‚˜ë¥¼ ê°ì‹œí•˜ëŠ” ì‹¬íŒê´€ì´ ìˆëŠ” ê²ƒ ê°™ë‹¤." },
            { t: 1, q: "ì™„ë²½í•´ì§€ê¸° ìœ„í•´ ë„ˆë¬´ ë§ì€ ëŒ€ê°€ë¥¼ ì¹˜ë¥¸ë‹¤ê³  ëŠë‚€ë‹¤." },
            { t: 1, q: "í™” ë‚´ì§€ ì•Šìœ¼ë ¤ í•˜ì§€ë§Œ í•œ ë²ˆ í™”ê°€ ë‚˜ë©´ ì˜¤ë˜ê°€ëŠ” í¸ì´ë‹¤." },
            { t: 1, q: "ì›ì¹™ê³¼ ì´ìƒì€ ë‚˜ë¥¼ ë” ë…¸ë ¥í•˜ë„ë¡ ê³ ë¬´ì‹œí‚¨ë‹¤." },
            { t: 1, q: "ì„±ì‹¤í•˜ê³  ì •ì§í•˜ë ¤ ë…¸ë ¥í•˜ë‹¤ ë³´ë‹ˆ ì†Œì‹¬í•œ ë¶€ë¶„ì´ ìˆë‹¤." },
            { t: 1, q: "ë¹„íŒì ì´ë©° ì–´ë””ê°€ ì˜ëª»ë˜ì–´ ìˆëŠ”ì§€ ê¸ˆë°© ì•Œ ìˆ˜ ìˆë‹¤." },
            { t: 1, q: "ì¸ì •ë°›ê¸° ì´ì „ì— ë‚´ ìì‹ ì´ ë¨¼ì € ì™„ì „í•´ì•¼ í•œë‹¤ê³  ë¯¿ëŠ”ë‹¤." },
            { t: 2, q: "ë‚˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë”°ëœ»í•˜ê³  ì¹œì ˆí•œ ì„±í’ˆì„ ê°€ì¡Œë‹¤." },
            { t: 2, q: "ë‹¤ë¥¸ ì‚¬ëŒê³¼ ì¹œìˆ™í•œ ëŠë‚Œì„ ê°–ëŠ” ê²ƒì´ ì•„ì£¼ ìì—°ìŠ¤ëŸ½ë‹¤." },
            { t: 2, q: "ì‰½ê²Œ ì‚¬ëŒë“¤ê³¼ ëŒ€í™”í•˜ê³  ì¹œë°€í•˜ê²Œ ì§€ë‚´ëŠ” í¸ì´ë‹¤." },
            { t: 2, q: "ì‚¬ëŒë“¤ì´ ë‚˜ì˜ ì¡°ì–¸ê³¼ ë„ì›€ì„ í¸ì•ˆí•˜ê²Œ ì–»ê¸¸ ë°”ë€ë‹¤." },
            { t: 2, q: "ì£¼ë³€ì„ ì¹­ì°¬í•´ì„œ ë‚´ê°€ íŠ¹ë³„í•œ ì‚¬ëŒì´ë€ ê±¸ ì•Œë¦¬ë ¤ ë…¸ë ¥í•œë‹¤." },
            { t: 2, q: "ë•Œë•Œë¡œ ì‚¬ëŒë“¤ì´ ë‚˜ì—ê²Œ ê³¼ë„í•˜ê²Œ ì˜ì¡´í•˜ëŠ” ê²ƒì„ ëŠë‚€ë‹¤." },
            { t: 2, q: "ë‚˜ëŠ” ìŠ¤ìŠ¤ë¡œë¥¼ 'ë‚™ì‹¬í•œ ìë¥¼ ì¹˜ìœ í•˜ëŠ” ì‚¬ëŒ'ì´ë¼ ìƒê°í•œë‹¤." },
            { t: 2, q: "ê±°ì ˆí•˜ëŠ” ê²ƒì´ ì–´ë ¤ì›Œ ìš”êµ¬ë¥¼ ë“¤ì–´ì£¼ëŠ” ê²½ìš°ê°€ ë§ë‹¤." },
            { t: 2, q: "ë‚˜ëŠ” ë°›ëŠ” ê²ƒë³´ë‹¤ ì£¼ëŠ” ê²ƒì´ í›¨ì”¬ ë§ˆìŒ í¸í•˜ë‹¤." },
            { t: 2, q: "ë‚˜ëŠ” ì¡´ê²½, ì¸ì •, ìŠ¹ì¸, ì°¬ì‚¬ ë°›ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤." },
            { t: 3, q: "ë‚˜ëŠ” ë‚´ ëŠ¥ë ¥ì— ëŒ€í•´ ìƒë‹¹í•œ ìì‹ ê°ì„ ê°€ì§€ê³  ìˆë‹¤." },
            { t: 3, q: "ë‚´ ì¼ì— ìˆì–´ì„œëŠ” ì •í™•í•œ ì „ë¬¸ê°€ê°€ ë˜ê³  ì‹¶ë‹¤." },
            { t: 3, q: "ì¼ì„ ë§ì´ í• ìˆ˜ë¡ ê¸°ë¶„ì´ ì¢‹ê³  ë” ì˜í•´ë‚´ê²Œ ëœë‹¤." },
            { t: 3, q: "ë‚´ê°€ ì´ë£¬ ì„±ê³¼ì— ëŒ€í•´ ì¸ì •ì„ ë°›ì„ ë•Œ ê¸°ë¶„ì´ ì•„ì£¼ ì¢‹ë‹¤." },
            { t: 3, q: "ì¸ì •ë°›ê¸° ìœ„í•´ ë…¸ë ¥í•˜ì§€ë§Œ ê·¸ ë…¸ë ¥ì„ ê²‰ìœ¼ë¡œ ìˆ¨ê¸´ë‹¤." },
            { t: 3, q: "ë‚˜ëŠ” ëª©ì ì˜ì‹ê³¼ ì •ì—´ì„ ê°€ì§€ê³  ì¼ì„ ì¶”ì§„í•œë‹¤." },
            { t: 3, q: "í•­ìƒ ë‚˜ë¥¼ ìœ„í•œ ìƒˆë¡œìš´ ëª©í‘œë¥¼ ìŠ¤ìŠ¤ë¡œ ì„¤ì •í•œë‹¤." },
            { t: 3, q: "ì˜ëª»í•œ ì¼ë³´ë‹¤ëŠ” ì˜í•œ ì¼ì— ì£¼ì˜ë¥¼ ë” ê¸°ìš¸ì¸ë‹¤." },
            { t: 3, q: "ì‚¬ëŒë“¤ì—ê²Œ ê°•í•œ ì¸ìƒì„ ì‹¬ì–´ì£¼ê³  ë™ê¸°ë¶€ì—¬ë¥¼ ì˜ í•œë‹¤." },
            { t: 3, q: "ë‚˜ëŠ” ë‚¨ë“¤ì—ê²Œ ë‚˜ì˜ ì¢‹ì€ ëª¨ìŠµë§Œ ë³´ì—¬ì£¼ë ¤ëŠ” ê²½í–¥ì´ ìˆë‹¤." },
            { t: 4, q: "ë‚˜ëŠ” ìƒì§•ì ì¸ ê²ƒ(ì‹œ, ë¹„ìœ , ì˜ˆìˆ  ë“±)ì— ë§ˆìŒì´ ëŒë¦°ë‹¤." },
            { t: 4, q: "ì‚¬ëŒë“¤ì€ ë‚˜ì˜ ì°½ì¡°ì„±ê³¼ ê°ì •ì˜ ê¹Šì´ì— ë§¤ë ¥ì„ ëŠë‚€ë‹¤." },
            { t: 4, q: "ë‚˜ëŠ” ì‚¶ì˜ ìŠ¬í””ê³¼ ë¹„ê·¹ì ì¸ ë©´ì„ ê°€ê¹ê²Œ ì—¬ê¸´ë‹¤." },
            { t: 4, q: "ì œëŒ€ë¡œ ì´í•´ë°›ì§€ ëª»í•˜ëŠ” ê²ƒì€ ë‚˜ì—ê²Œ íŠ¹íˆ ê³ í†µìŠ¤ëŸ¬ìš´ ì¼ì´ë‹¤." },
            { t: 4, q: "ì–¸ì  ê°€ ë‚˜ì˜ ì§„ì •í•œ ì‚¬ë‘ì´ ì°¾ì•„ì˜¬ ë‚ ì„ ê°ˆë§í•œë‹¤." },
            { t: 4, q: "ë‚˜ì™€ ê°€ê¹Œì›Œì§€ê¸° í˜ë“  ì‚¬ëŒì—ê²Œ ê³§ì˜ ë§¤ë ¥ì„ ëŠë¼ê³¤ í•œë‹¤." },
            { t: 4, q: "ë‚˜ëŠ” ë‚˜ì˜ ì§ê´€ì„ ì†Œì¤‘í•˜ê²Œ ìƒê°í•˜ë©° í¬ê²Œ ì˜ì¡´í•œë‹¤." },
            { t: 4, q: "ë•Œë•Œë¡œ ì‚¶ì€ ë„ˆë¬´ë‚˜ í‰ë²”í•˜ê³  ì§€ë£¨í•˜ê²Œ ëŠê»´ì§„ë‹¤." },
            { t: 4, q: "ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì˜ ê³ í†µì„ í•¨ê»˜ ëŠë‚„ ë•Œê°€ ë§ë‹¤." },
            { t: 4, q: "ë‚˜ëŠ” ë‚´ê°€ ë¹„ê·¹ì˜ ì£¼ì¸ê³µì²˜ëŸ¼ ëŠê»´ì§ˆ ë•Œê°€ ìˆë‹¤." },
            { t: 5, q: "ë¬¸ì œê°€ ìƒê¸°ë©´ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•˜ëŠ” ê²ƒì´ ë§ˆìŒ í¸í•˜ë‹¤." },
            { t: 5, q: "ì§ì ‘ ë›°ì–´ë“¤ê¸° ì „ì— ë‚¨ë“¤ì´ í•˜ëŠ” ê²ƒì„ ë¨¼ì € ê´€ì°°í•œë‹¤." },
            { t: 5, q: "ì‹œê°„ê³¼ ê¸ˆì „ì— ê´€í•´ì„œ ë‚­ë¹„í•˜ê³  ì‹¶ì§€ ì•Šì•„ ì¸ìƒ‰í•´ì§ˆ ë•Œê°€ ìˆë‹¤." },
            { t: 5, q: "ì „ì²´ ìƒí™©ì„ ë‹¤ íŒŒì•…í•œ í›„ì— í–‰ë™í•˜ê³  ì‹¶ì–´ í•œë‹¤." },
            { t: 5, q: "ì‚¬ëŒë“¤ì—ê²Œ ì£¼ëŠ” ì •ë³´ë³´ë‹¤ ë°›ëŠ” ì •ë³´ê°€ ë” ë§ë‹¤." },
            { t: 5, q: "ì§€ë‚˜ì¹˜ê²Œ ê°ì •ì ì´ê±°ë‚˜ ì°¸ê²¬í•˜ëŠ” ì‚¬ëŒì„ ì‹«ì–´í•œë‹¤." },
            { t: 5, q: "ë‚˜ë§Œì˜ ì‹œê°„ê³¼ ê³µê°„ì´ ìˆì„ ë•Œ í¸ì•ˆí•˜ê²Œ ì‰´ ìˆ˜ ìˆë‹¤." },
            { t: 5, q: "ëŠë‚Œë³´ë‹¤ëŠ” ìƒê°ì„ í‘œí˜„í•˜ëŠ” ê²ƒì´ ë” ì‰½ê²Œ ëŠê»´ì§„ë‹¤." },
            { t: 5, q: "ì–¸ì  ê°€ëŠ” í•„ìš”í•  ê²ƒì´ë¼ ìƒê°í•´ ë¬¼ê±´ì„ ì˜ ë²„ë¦¬ì§€ ëª»í•œë‹¤." },
            { t: 5, q: "ëª…í™•í•œ ì£¼ì œ ì—†ëŠ” ì¡ë‹´ì„ ì¢‹ì•„í•˜ì§€ ì•ŠëŠ” í¸ì´ë‹¤." },
            { t: 6, q: "ë‚˜ëŠ” ê°€ì¡±ê³¼ ì¹œêµ¬ë“¤ì—ê²Œ ë§¤ìš° í—Œì‹ ì ì´ê³  ì¶©ì‹¤í•˜ë‹¤." },
            { t: 6, q: "ë‚˜ëŠ” ì˜¤ë˜ ì•Œê³  ì§€ë‚¸ ì‚¬ëŒì´ ì•„ë‹ˆë©´ ì˜ ì‹ ë¢°í•˜ì§€ ì•ŠëŠ”ë‹¤." },
            { t: 6, q: "ë‚˜ëŠ” ì²œì„±ì ìœ¼ë¡œ ê²½ê³„ì‹¬ì´ ë§ê³  ì˜ì‹¬ì´ ë§ì€ ì„±ê²©ì´ë‹¤." },
            { t: 6, q: "ê³µë™ì˜ ëª…ë¶„ì„ ìœ„í•´ í•¨ê»˜ ì¼í•  ë•Œ ì¹œë°€ê°ì„ ëŠë‚€ë‹¤." },
            { t: 6, q: "ì‚¬ëŒë“¤ì€ ë‚˜ë¥¼ ë¯¿ì„ ë§Œí•˜ê³  ì¶©ì‹¤í•œ ì‚¬ëŒìœ¼ë¡œ ì—¬ê¸´ë‹¤." },
            { t: 6, q: "ë¶ˆì•ˆì„ ë§ì´ ëŠë¼ì§€ë§Œ ìœ„ê¸°ì˜ ìˆœê°„ì—” ë¬¸ì œë¥¼ ì˜ í•´ê²°í•œë‹¤." },
            { t: 6, q: "ì‹¤ìˆ˜ë¥¼ í–ˆì„ ë•Œ ëª¨ë“  ì‚¬ëŒì´ ë‚˜ë¥¼ ê³µê²©í• ê¹Œ ë´ ë‘ë µë‹¤." },
            { t: 6, q: "ê·œì¹™ì„ ì˜ ì§€í‚¤ì§€ë§Œ ëª¨ìˆœëœ ê·œì¹™ì€ ê¹¨ëœ¨ë ¤ ë²„ë¦°ë‹¤." },
            { t: 6, q: "ì¹­ì°¬ì„ ë“¤ì–´ë„ ê·¸ë“¤ì˜ ë™ê¸°ê°€ ì˜ì‹¬ìŠ¤ëŸ¬ìš¸ ë•Œê°€ ë§ë‹¤." },
            { t: 6, q: "í—ˆì„¸ë¥¼ ë¶€ë¦¬ê±°ë‚˜ ì•¼ì‹¬ë§Œë§Œí•œ ì‚¬ëŒì„ ì¢‹ì•„í•˜ì§€ ì•ŠëŠ”ë‹¤." },
            { t: 7, q: "ë‚˜ëŠ” ê¸ì •ì ì´ê³  í™œë‹¬í•˜ë©° ì—¬ëŸ¬ ë°©ë©´ì— ì¬ëŠ¥ì´ ìˆë‹¤." },
            { t: 7, q: "ë‚˜ëŠ” ì¸ìƒì„ ì¦ê¸°ë©° ì–µì••ë°›ì§€ ì•Šìœ¼ë ¤ê³  ë…¸ë ¥í•œë‹¤." },
            { t: 7, q: "í•œ ê°€ì§€ë¥¼ íŒŒê³ ë“¤ê¸°ë³´ë‹¤ ì—¬ëŸ¬ ì¼ì„ ëŒ€ì¶© ë‹¤ ì˜í•˜ëŠ” í¸ì´ë‹¤." },
            { t: 7, q: "ì—¬í–‰, ëª¨í—˜, ë‹¤ì–‘í•œ ìŒì‹ì„ ì¦ê¸°ëŠ” ì‚¶ì„ ì‚´ê³  ì‹¶ë‹¤." },
            { t: 7, q: "ê³ ìƒì—ì„œì˜ êµí›ˆë³´ë‹¤ ì¦ê±°ì›€ ê°€ë“í•œ ì¸ìƒì„ ì›í•œë‹¤." },
            { t: 7, q: "ë‚˜ëŠ” ë­”ê°€ë¥¼ ìƒì—ˆì„ ë•Œ ìƒì‹¤ê°ì—ì„œ ë¹¨ë¦¬ ë²—ì–´ë‚˜ëŠ” í¸ì´ë‹¤." },
            { t: 7, q: "ê´€ì‹¬ ëŒê¸°ë¥¼ ì¢‹ì•„í•˜ê³  ì¬ë¯¸ìˆëŠ” ì´ì•¼ê¸°ë‚˜ ë†ë‹´ì„ ì¦ê¸´ë‹¤." },
            { t: 7, q: "ë‚˜ì—ê²Œ ì¤‘ìš”í•œ ê²ƒì€ ì•ˆì „ë³´ë‹¤ í¥ë¶„ê³¼ ë‹¤ì–‘í•¨ì´ë‹¤." },
            { t: 7, q: "ì–´ë–¤ ì¼ì´ ë” ì´ìƒ ì¬ë¯¸ì—†ìœ¼ë©´ ì¦‰ì‹œ ê·¸ë§Œë‘ê³¤ í•œë‹¤." },
            { t: 7, q: "ìŠ¬í””ê³¼ ê³ í†µì—ì„œ ë¹¨ë¦¬ ë¹ ì ¸ë‚˜ì˜¤ê³  ë³µì¡í•œ ìƒí™©ì„ ì˜ í‘¼ë‹¤." },
            { t: 8, q: "í•„ìš”ë¡œ í•˜ëŠ” ê²ƒì„ ìœ„í•´ ì‹¸ìš°ëŠ” ê²ƒì´ ê²ë‚˜ì§€ ì•ŠëŠ”ë‹¤." },
            { t: 8, q: "íƒ€ì¸ì˜ ì•½ì ì„ ë¹¨ë¦¬ ì•Œì•„ì°¨ë¦¬ê³  ì´ë¥¼ ì´ìš©í•˜ê¸°ë„ í•œë‹¤." },
            { t: 8, q: "ì‚¬ëŒë“¤ê³¼ ëŒ€ê²°í•˜ëŠ” ê²ƒì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ìì£¼ í•˜ëŠ” í¸ì´ë‹¤." },
            { t: 8, q: "í˜ì„ í–‰ì‚¬í•˜ëŠ” ê²ƒì´ í†µì¾Œí•˜ê³  ëª¨ë“  ê±¸ í†µì œí•˜ê³  ì‹¶ë‹¤." },
            { t: 8, q: "í¬ê²Œ í™”ë¥¼ ë‚¼ ë•Œê°€ ìˆì§€ë§Œ ê³§ ê°€ë¼ì•‰ëŠ” í¸ì´ë‹¤." },
            { t: 8, q: "ì˜ë¦¬ì™€ ë„ë¦¬ë¥¼ ì„¸ìƒì—ì„œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•œë‹¤." },
            { t: 8, q: "ë‚´ ì‚¬ëŒì´ë¼ê³  ëŠë¼ë©´ ëê¹Œì§€ ì±…ì„ì§€ê³  ë³´í˜¸í•´ ì¤€ë‹¤." },
            { t: 8, q: "ë‚˜ëŠ” ë³µì¡í•œ ê²ƒì„ ì‹«ì–´í•˜ëŠ” ë‹¨ìˆœí•œ ì‚¬ëŒì´ë‹¤." },
            { t: 8, q: "ë‚˜ì˜ ìœ ë¨¸ ê°ê°ì€ í˜„ì‹¤ì ì´ê³  ë•Œë¡œëŠ” ê±°ì¹ ê¸°ë„ í•˜ë‹¤." },
            { t: 8, q: "ì˜ì§€ê°€ ê°•í•˜ë©° ë„ì „í•  ëŒ€ìƒì´ ìˆì„ ë•Œ í˜ì´ ì†ŸëŠ”ë‹¤." },
            { t: 9, q: "ë‚˜ëŠ” ì•„ì£¼ ëŠê¸‹í•œ ì‚¬ëŒì´ë©° ë¬´ë‚œí•˜ë‹¤ëŠ” í‰ì„ ë“£ëŠ”ë‹¤." },
            { t: 9, q: "ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šê³  ìˆì„ ë•Œê°€ ì†”ì§íˆ ê°€ì¥ ì¢‹ë‹¤." },
            { t: 9, q: "ìœ¡ì²´ì ì¸ ì•ˆë½í•¨ì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê¸°ê³  ì ì´ ë§ì€ í¸ì´ë‹¤." },
            { t: 9, q: "ì–´ë–¤ ì¼ì„ í•˜ë“  í˜ì„ ë‚­ë¹„í•˜ê³  ì‹¶ì§€ ì•Šì•„ ê¶ë¦¬í•œë‹¤." },
            { t: 9, q: "ìš”êµ¬ë¥¼ ì˜ í•˜ì§€ ì•Šìœ¼ë©° ìš”êµ¬ë°›ìœ¼ë©´ ê³ ì§‘ìŠ¤ëŸ¬ì›Œì§„ë‹¤." },
            { t: 9, q: "ë‚˜ëŠ” ê°ì •ì— ì¢Œìš°ë˜ì§€ ì•ŠëŠ” ê³µí‰í•œ ì¤‘ì¬ìì´ë‹¤." },
            { t: 9, q: "ë‚˜ ìì‹ ì„ ê·¸ë¦¬ ì¤‘ìš”í•œ ì‚¬ëŒì´ë¼ê³  ìƒê°í•˜ì§€ ì•ŠëŠ”ë‹¤." },
            { t: 9, q: "ì‰½ê²Œ í¥ë¶„í•˜ëŠ” ì‚¬ëŒë“¤ ì‚¬ì´ì—ì„œë„ ë‚˜ëŠ” ì•ˆì •ëœ í¸ì´ë‹¤." },
            { t: 9, q: "íƒ€ì¸ì˜ ê´€ì ì´ ì‰½ê²Œ ì´í•´ë˜ê³  ë‚´ ì£¼ì¥ë³´ë‹¤ ë™ì˜ë¥¼ ì˜ í•œë‹¤." },
            { t: 9, q: "ì§€ìœ„ë‚˜ ëª…ì„±ì— ê´€ì‹¬ì´ ì ê³  ê²½ìŸí•˜ê³  ì‹¶ì§€ ì•Šë‹¤." }
        ];

        const subtypeQuestions = [
            { id: 'sp', q: "ë‚˜ëŠ” ë‚´ ëª¸ì˜ ì•ˆë½í•¨, ê±´ê°•, ê·¸ë¦¬ê³  ê²½ì œì  ìë¦½ì´ ì¸ìƒì—ì„œ ê°€ì¥ ìš°ì„ ì´ë‹¤.", cat: 'sp' },
            { id: 'sp', q: "ì£¼ë³€ í™˜ê²½ì´ ì•ˆì „í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•  ë•Œ ê°€ì¥ í° ì•ˆë„ê°ì„ ëŠë‚€ë‹¤.", cat: 'sp' },
            { id: 'sp', q: "ì—ë„ˆì§€ë¥¼ ì•„ê»´ì•¼ í•œë‹¤ê³  ìƒê°í•˜ë©°, ë‚´ ìì›ì„ ê´€ë¦¬í•˜ëŠ” ë° ì‹ ê²½ì„ ë§ì´ ì“´ë‹¤.", cat: 'sp' },
            { id: 'sp', q: "ìœ„í—˜í•œ ëª¨í—˜ë³´ë‹¤ëŠ” ì•ˆì •ëœ ì¼ìƒì˜ ì§ˆì„œê°€ ìœ ì§€ë˜ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤.", cat: 'sp' },
            { id: 'sx', q: "ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒì´ë‚˜ ë¶„ì•¼ì— í­ë°œì ì¸ ì—ë„ˆì§€ë¥¼ ìŸìœ¼ë©° ëª°ì…í•  ë•Œ ì‚´ì•„ìˆìŒì„ ëŠë‚€ë‹¤.", cat: 'sx' },
            { id: 'sx', q: "ë‹¨ìˆœí•œ ì¹œë°€ê°ë³´ë‹¤ 'ê°•ë ¬í•œ ë¶ˆê½ƒ'ì´ íŠ€ëŠ” ì •ì„œì /ì§€ì  êµê°ì„ ì¶”êµ¬í•œë‹¤.", cat: 'sx' },
            { id: 'sx', q: "ê´€ê³„ì—ì„œ í•œ ì‚¬ëŒê³¼ ê¹Šê³  ëœ¨ê±°ìš´ ìœ ëŒ€ë¥¼ ë§ºëŠ” ê²ƒì´ ë¬´ì—‡ë³´ë‹¤ ì¤‘ìš”í•˜ë‹¤.", cat: 'sx' },
            { id: 'sx', q: "ë‚˜ëŠ” ë•Œë¡œ ë“œë¼ë§ˆí‹±í•˜ê³  ê°•í•œ ìê·¹ì´ ìˆëŠ” ìƒí™©ì„ ì¦ê¸°ê±°ë‚˜ ìŠ¤ìŠ¤ë¡œ ë§Œë“ ë‹¤.", cat: 'sx' },
            { id: 'so', q: "ëª¨ì„ ë‚´ì—ì„œ ë‚´ ì—­í• ì´ ë¬´ì—‡ì¸ì§€, íƒ€ì¸ì—ê²Œ ì–´ë–»ê²Œ ì¸ì‹ë˜ëŠ”ì§€ ë¯¼ê°í•˜ê²Œ ì‚´í•€ë‹¤.", cat: 'so' },
            { id: 'so', q: "ê³µë™ì²´ì˜ ì´ìµì´ë‚˜ ì‚¬íšŒì  ê°€ì¹˜ë¥¼ ìœ„í•´ ê¸°ì—¬í•  ë•Œ ì‚¶ì˜ í° ë³´ëŒì„ ëŠë‚€ë‹¤.", cat: 'so' },
            { id: 'so', q: "ì‚¬íšŒì  íë¦„ì´ë‚˜ íŠ¸ë Œë“œì— ê´€ì‹¬ì´ ë§ê³ , ì§‘ë‹¨ ì‹œìŠ¤í…œì´ ì–´ë–»ê²Œ ëŒì•„ê°€ëŠ”ì§€ íŒŒì•…í•˜ë ¤ í•œë‹¤.", cat: 'so' },
            { id: 'so', q: "ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ í™”í•©í•˜ê³  ì‚¬íšŒì ìœ¼ë¡œ ì¸ì •ë°›ëŠ” ì§€ìœ„ë¥¼ ì–»ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤.", cat: 'so' }
        ];

        const typeInfo = {
            1: { name: "1ë²ˆ: ê°œí˜ê°€", center: "ë³¸ëŠ¥(ì¥) ì¤‘ì‹¬", desc: "ë„ë•ì ì´ê³  ì •ì˜ë¡œìš´ ì™„ë²½ì£¼ì˜ìì…ë‹ˆë‹¤. 'ì˜³ìŒ'ì„ ìœ„í•´ ìì‹ ê³¼ íƒ€ì¸ì„ ëŠì„ì—†ì´ ì±„ì°ì§ˆí•˜ë©° ì„¸ìƒì„ ê°œì„ í•˜ê³ ì í•©ë‹ˆë‹¤." },
            2: { name: "2ë²ˆ: ì¡°ë ¥ê°€", center: "ê°ì •(ê°€ìŠ´) ì¤‘ì‹¬", desc: "ë”°ëœ»í•˜ê³  í—Œì‹ ì ì¸ ì‚¬ë‘ê¾¼ì…ë‹ˆë‹¤. íƒ€ì¸ì—ê²Œ í•„ìš”í•œ ì¡´ì¬ê°€ ë¨ìœ¼ë¡œì¨ ìì‹ ì˜ ì¡´ì¬ ê°€ì¹˜ë¥¼ í™•ì¸í•˜ê³  ì‚¬ë‘ë°›ìœ¼ë ¤ í•©ë‹ˆë‹¤." },
            3: { name: "3ë²ˆ: ì„±ì·¨ê°€", center: "ê°ì •(ê°€ìŠ´) ì¤‘ì‹¬", desc: "ìœ ëŠ¥í•˜ê³  ì„±ê³¼ ì¤‘ì‹¬ì ì¸ íš¨ìœ¨ì£¼ì˜ìì…ë‹ˆë‹¤. ì„±ê³µí•œ ì´ë¯¸ì§€ë¥¼ ê°€ê¾¸ê³  ëª©í‘œë¥¼ í–¥í•´ ë¬´ì„­ê²Œ ì§ˆì£¼í•˜ëŠ” ì‹¤ë¬´ê°€ì…ë‹ˆë‹¤." },
            4: { name: "4ë²ˆ: ê°œì¸ì£¼ì˜ì", center: "ê°ì •(ê°€ìŠ´) ì¤‘ì‹¬", desc: "ë…ì°½ì ì´ê³  ê°ìˆ˜ì„±ì´ í’ë¶€í•œ ì˜ˆìˆ ê°€ì  ì˜í˜¼ì…ë‹ˆë‹¤. ìì‹ ì˜ ë‚´ë©´ì„ ê¹Šì´ íƒêµ¬í•˜ë©° í‰ë²”í•¨ì„ ê±°ë¶€í•˜ê³  ë…íŠ¹í•œ ì •ì²´ì„±ì„ ì¶”êµ¬í•©ë‹ˆë‹¤." },
            5: { name: "5ë²ˆ: íƒêµ¬ê°€", center: "ì‚¬ê³ (ë¨¸ë¦¬) ì¤‘ì‹¬", desc: "ì§€ì ì´ê³  ë¶„ì„ì ì¸ ê´€ì°°ìì…ë‹ˆë‹¤. ë…ë¦½ì ì¸ ì‚¬ìƒí™œì„ ì¤‘ì‹œí•˜ë©°, ì§€ì‹ì„ ìŒ“ì•„ ì„¸ìƒì„ ë…¼ë¦¬ì ìœ¼ë¡œ ì´í•´í–ˆì„ ë•Œ ì•ˆë„ê°ì„ ëŠë‚ë‹ˆë‹¤." },
            6: { name: "6ë²ˆ: ì¶©ì„±ê°€", center: "ì‚¬ê³ (ë¨¸ë¦¬) ì¤‘ì‹¬", desc: "ì‹ ì¤‘í•˜ê³  ì±…ì„ê°ì´ ê°•í•œ í˜‘ë ¥ìì…ë‹ˆë‹¤. ë¯¸ë˜ì˜ ìœ„í—˜ì— ëŒ€ë¹„í•˜ë©° ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì´ë‚˜ ê³µë™ì²´ ì•ˆì—ì„œ ì•ˆì •ì„ ì–»ìœ¼ë ¤ í•©ë‹ˆë‹¤." },
            7: { name: "7ë²ˆ: ì—´ì •ê°€", center: "ì‚¬ê³ (ë¨¸ë¦¬) ì¤‘ì‹¬", desc: "ë‚™ì²œì ì´ê³  í˜¸ê¸°ì‹¬ ë§ì€ ëª¨í—˜ê°€ì…ë‹ˆë‹¤. ë‹¤ì–‘í•œ ì¦ê±°ì›€ì„ íƒìƒ‰í•˜ë©° ê³ í†µê³¼ ì œì•½ì„ íšŒí”¼í•˜ê³  ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ê¿ˆê¾¸ëŠ” ê¸ì •ì£¼ì˜ìì…ë‹ˆë‹¤." },
            8: { name: "8ë²ˆ: ë„ì „ì", center: "ë³¸ëŠ¥(ì¥) ì¤‘ì‹¬", desc: "ê°•í•œ ì˜ì§€ì™€ ë¦¬ë”ì‹­ì„ ê°€ì§„ íˆ¬ì‚¬ì…ë‹ˆë‹¤. ìì‹ ì˜ ì˜ì—­ì„ ì§€í‚¤ê³  ì•½ìë¥¼ ë³´í˜¸í•˜ë©°, ì„¸ìƒì˜ ë¶€ë‹¹í•¨ì— ë‹¹ë‹¹íˆ ë§ì„œëŠ” íŒŒì›Œí’€í•œ ë¦¬ë”ì…ë‹ˆë‹¤." },
            9: { name: "9ë²ˆ: í‰í™”ì£¼ì˜ì", center: "ë³¸ëŠ¥(ì¥) ì¤‘ì‹¬", desc: "ì¡°í™”ë¡­ê³  ìˆ˜ìš©ì ì¸ ì¤‘ì¬ìì…ë‹ˆë‹¤. ê°ˆë“±ì„ íšŒí”¼í•˜ê³  ë‚´ë©´ì˜ í‰í™”ë¥¼ ìœ ì§€í•˜ë©°, ëª¨ë“  ê²ƒì„ ì•„ìš°ë¥´ëŠ” í¬ìš©ë ¥ ìˆëŠ” ì„±í’ˆì„ ê°€ì¡ŒìŠµë‹ˆë‹¤." }
        };

        const subtypeInfo = {
            sp: { name: "ìê¸°ë³´ì¡´(Self-Preservation)", full: "ì•ˆì •ê³¼ ìƒì¡´ì˜ ë³¸ëŠ¥", desc: "ê°€ì¥ í˜„ì‹¤ì ì´ê³  ì‹ ì¤‘í•œ íƒœë„ë¥¼ ë³´ì…ë‹ˆë‹¤. ìì‹ ì˜ ê±´ê°•, ì¬ì •, ì‚¬ìƒí™œ ë³´í˜¸ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ í•˜ë©°, ì™¸ë¶€ ìê·¹ìœ¼ë¡œë¶€í„° ìì‹ ì„ ë³´í˜¸í•˜ê³  ì•ˆë½í•œ ìš”ìƒˆë¥¼ êµ¬ì¶•í•˜ë ¤ëŠ” ê²½í–¥ì´ ê°•í•©ë‹ˆë‹¤." },
            sx: { name: "ì¼ëŒ€ì¼(Sexual/1-on-1)", full: "ê°•ë ¬í•¨ê³¼ ê²°í•©ì˜ ë³¸ëŠ¥", desc: "íŠ¹ì • ëŒ€ìƒ(ì‚¬ëŒ í˜¹ì€ ê´€ì‹¬ì‚¬)ê³¼ì˜ ê¹Šê³  í­ë°œì ì¸ ì—°ê²°ì„ ì›í•©ë‹ˆë‹¤. í‰ë²”í•œ ê´€ê³„ë³´ë‹¤ ëœ¨ê±°ìš´ ì—´ì •ê³¼ ì¹´ë¦¬ìŠ¤ë§ˆ ìˆëŠ” êµê°ì„ ì¶”êµ¬í•˜ë©°, ìê·¹ì ì´ê³  ë³€í™”ë¬´ìŒí•œ ì—ë„ˆì§€ë¥¼ ë°œì‚°í•©ë‹ˆë‹¤." },
            so: { name: "ì‚¬íšŒì (Social)", full: "ì†Œì†ê³¼ ê°€ì¹˜ì˜ ë³¸ëŠ¥", desc: "ì§‘ë‹¨ ë‚´ì˜ ì§ˆì„œì™€ ìì‹ ì˜ ì—­í• ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤. ê³µë™ì²´ì— ê¸°ì—¬í•˜ê³  íƒ€ì¸ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” ê³¼ì •ì—ì„œ ì•ˆì •ì„ ì°¾ìœ¼ë©°, ì‚¬íšŒì  í‰íŒì´ë‚˜ ìœ„ê³„ì§ˆì„œì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ëŠ” ë¦¬ë”ì‹­ì„ ë³´ì…ë‹ˆë‹¤." }
        };

        const shuffledQuestions = [...enneagramQuestions].sort(() => Math.random() - 0.5);
        
        let currentPage = 0;
        const pageSize = 10;
        const mainTypePages = Math.ceil(shuffledQuestions.length / pageSize);
        const totalPages = mainTypePages + 1; // ë§ˆì§€ë§‰ì€ í•˜ìœ„ìœ í˜• í˜ì´ì§€
        let responses = {};
        let subResponses = {};
        let finalType = null;
        let finalSubtype = null;

        function renderPage() {
            const area = document.getElementById('options-area');
            const title = document.getElementById('step-title');
            const indicator = document.getElementById('page-indicator');
            const bar = document.getElementById('progress-bar');
            const prevBtn = document.getElementById('prev-btn');
            
            area.innerHTML = '';
            bar.style.width = ((currentPage + 1) / totalPages * 100) + '%';
            indicator.textContent = (currentPage + 1) + ' / ' + totalPages;
            prevBtn.classList.toggle('hidden', currentPage === 0);

            if (currentPage < mainTypePages) {
                title.textContent = "ë‚˜ì˜ ì„±ê²© ìœ í˜•ì„ íŒŒì•…í•´ ë³´ì„¸ìš”";
                const start = currentPage * pageSize;
                const end = start + pageSize;
                const pageItems = shuffledQuestions.slice(start, end);

                pageItems.forEach((item, idx) => {
                    const qId = 'q_' + (start + idx);
                    area.appendChild(createQuestionCard(item.q, qId, false));
                });
                document.getElementById('next-btn').textContent = "ë‹¤ìŒ ë‹¨ê³„ë¡œ";
            } else {
                title.textContent = "ë‹¹ì‹ ì˜ ì¼ìƒ ì—ë„ˆì§€ëŠ” ì–´ë””ë¡œ í–¥í•˜ë‚˜ìš”?";
                subtypeQuestions.forEach((item, idx) => {
                    area.appendChild(createQuestionCard(item.q, 'sub_' + idx, true));
                });
                document.getElementById('next-btn').textContent = "ìµœì¢… ë¶„ì„ ì™„ë£Œ";
            }
            area.scrollTop = 0;
        }

        function createQuestionCard(text, name, isSub) {
            const div = document.createElement('div');
            div.className = 'question-item';
            div.innerHTML = `<div class="question-text">${text}</div>
                <div class="rating-guide"><span>ì „í˜€ ì•„ë‹˜</span><span>ë§¤ìš° ê·¸ëŸ¬í•¨</span></div>
                <div class="rating-grid">
                    ${[1,2,3,4,5].map(v => `
                        <input type="radio" id="${name}_${v}" name="${name}" value="${v}" 
                               onchange="saveVal('${name}', ${v}, ${isSub})">
                        <label for="${name}_${v}">${v}</label>`).join('')}
                </div>`;
            
            // ê¸°ì¡´ ì„ íƒê°’ì´ ìˆë‹¤ë©´ ë³µì›
            setTimeout(() => {
                const saved = isSub ? subResponses[name] : responses[name];
                if (saved) {
                    const rb = div.querySelector(`input[value="${saved}"]`);
                    if (rb) rb.checked = true;
                }
            }, 0);

            return div;
        }

        window.saveVal = (n, v, isSub) => {
            if(isSub) subResponses[n] = v;
            else responses[n] = v;
        }

        document.getElementById('next-btn').addEventListener('click', () => {
            const areaNames = Array.from(document.querySelectorAll('.rating-grid')).map(g => g.querySelector('input').name);
            const allAnswered = areaNames.every(name => {
                return (name.startsWith('sub_')) ? subResponses[name] : responses[name];
            });

            if (!allAnswered) {
                document.getElementById('error-message').classList.remove('hidden');
                return;
            }
            document.getElementById('error-message').classList.add('hidden');

            if (currentPage < totalPages - 1) {
                currentPage++;
                renderPage();
            } else {
                calculateFinalResult();
            }
        });

        document.getElementById('prev-btn').addEventListener('click', () => {
            currentPage--;
            renderPage();
        });

        function calculateFinalResult() {
            // ìœ í˜• ì ìˆ˜ ê³„ì‚°
            const typeSums = { 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0 };
            const typeCounts = { 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0 };
            shuffledQuestions.forEach((q, i) => {
                const val = responses['q_' + i] || 0;
                typeSums[q.t] += val;
                typeCounts[q.t]++;
            });
            const typeNormalized = {};
            Object.keys(typeSums).forEach(t => {
                typeNormalized[t] = (typeSums[t] / (typeCounts[t] * 5)) * 100;
            });
            finalType = Object.keys(typeNormalized).reduce((a, b) => typeNormalized[a] >= typeNormalized[b] ? a : b);

            // í•˜ìœ„ìœ í˜• ì ìˆ˜ ê³„ì‚°
            const subSums = { sp:0, sx:0, so:0 };
            subtypeQuestions.forEach((q, i) => {
                const val = subResponses['sub_' + i] || 0;
                subSums[q.cat] += val;
            });
            finalSubtype = Object.keys(subSums).reduce((a, b) => subSums[a] >= subSums[b] ? a : b);

            showDisplay(typeNormalized);
        }

        function showDisplay(allScores) {
            document.getElementById('quiz-ui').classList.add('hidden');
            document.getElementById('result-area').classList.remove('hidden');
            
            const type = typeInfo[finalType];
            const sub = subtypeInfo[finalSubtype];

            document.getElementById('result-content').innerHTML = `
                <div class="result-card border-pink-200 bg-pink-50">
                    <h3 class="gaegu text-pink-700">âœ¨ ë¶„ì„ëœ ìµœê³ ì˜ ìœ í˜•: ${type.name}</h3>
                    <div class="text-[0.7rem] font-bold text-pink-400 mb-2 uppercase tracking-wider">${type.center}</div>
                    <div class="text-gray-600 text-[0.85rem] leading-relaxed whitespace-pre-line">${type.desc}</div>
                </div>
                <div class="result-card border-indigo-200 bg-indigo-50">
                    <h3 class="gaegu text-indigo-700">ğŸŒŸ ë°œë‹¬ëœ í•µì‹¬ ë³¸ëŠ¥: ${sub.name}</h3>
                    <div class="text-[0.7rem] font-bold text-indigo-400 mb-2 uppercase tracking-wider">${sub.full}</div>
                    <div class="text-gray-600 text-[0.85rem] leading-relaxed">${sub.desc}</div>
                </div>
                <div class="p-4 bg-yellow-50 rounded-2xl text-[0.7rem] text-yellow-700 leading-relaxed border border-yellow-100">
                    <b>ì‹œë„ˆì§€ ë¶„ì„:</b> ${type.name}ì¸ ë‹¹ì‹ ì´ ${sub.name} ë³¸ëŠ¥ì„ ê°€ì¡Œì„ ë•Œ, ë‹¹ì‹ ì€ ìì‹ ì˜ ëª©í‘œì™€ ê°€ì¹˜ë¥¼ ${finalSubtype === 'sp' ? 'ì•ˆì •ì ìœ¼ë¡œ ì§€ì¼œë‚´ëŠ” ìˆ˜í˜¸ì' : finalSubtype === 'sx' ? 'ê°•ë ¬í•œ ì—´ì •ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ë„ì „ì' : 'ì‚¬íšŒì  ì—°ê²°ì„ í†µí•´ ì‹¤ì²œí•˜ëŠ” ë¦¬ë”'}ì˜ ëª¨ìŠµì„ ë³´ì¼ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.
                </div>
            `;

            const stats = document.getElementById('score-stats');
            Object.keys(allScores).sort((a,b) => allScores[b] - allScores[a]).forEach(k => {
                const s = allScores[k].toFixed(0);
                stats.innerHTML += `
                    <div>
                        <div class="flex justify-between text-[0.65rem] font-bold text-gray-500 mb-1">
                            <span>${typeInfo[k].name}</span>
                            <span>${s}ì </span>
                        </div>
                        <div class="score-bar-container"><div class="score-bar-fill" style="width:${s}%"></div></div>
                    </div>
                `;
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        renderPage();
    </script>
</body>
</html>
